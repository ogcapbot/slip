<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OG Capper Bets - Real-Time Loader</title>
  <style>
    body {
      background: #0c0c0c;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .loader-wrapper {
      position: relative;
      width: 150px;
      height: 150px;
    }
    .circle {
      stroke-dasharray: 440;
      stroke-dashoffset: 440;
      stroke-linecap: round;
      animation: progress 1s ease-out forwards;
    }
    @keyframes progress {
      to {
        stroke-dashoffset: 0;
      }
    }
    .percent-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.8rem;
      font-weight: bold;
    }
    .log-box {
      margin-top: 2rem;
      width: 350px;
      height: 4.5rem;
      background: #1a1a1a;
      overflow-y: scroll;
      padding: 0.5rem;
      font-size: 0.9rem;
      border: 1px solid #333;
      border-radius: 6px;
      line-height: 1.3;
    }
    .log-entry {
      margin-bottom: 0.3rem;
      color: #80ffcc;
    }
  </style>
</head>
<body>
  <div class="loader-wrapper">
    <svg width="150" height="150">
      <circle cx="75" cy="75" r="70" stroke="#333" stroke-width="10" fill="none" />
      <circle id="progressCircle" cx="75" cy="75" r="70" stroke="#00ff88" stroke-width="10" fill="none" class="circle" />
    </svg>
    <div id="percentText" class="percent-text">0%</div>
  </div>

  <div id="logBox" class="log-box"></div>

  <script>
    const progressCircle = document.getElementById('progressCircle');
    const percentText = document.getElementById('percentText');
    const logBox = document.getElementById('logBox');

    let progress = 0;
    const totalSteps = 6; // this will update dynamically in production

    function updateProgress(currentStep, total) {
      progress = Math.round((currentStep / total) * 100);
      const offset = 440 - (440 * progress) / 100;
      progressCircle.style.strokeDashoffset = offset;
      percentText.textContent = `${progress}%`;
    }

    function logMessage(message) {
      const div = document.createElement('div');
      div.className = 'log-entry';
      div.textContent = message;
      logBox.appendChild(div);
      logBox.scrollTop = logBox.scrollHeight;
    }

    // DEMO ONLY: simulate dynamic loading
    async function simulateLoading() {
      const steps = [
        'Fetching list of sports from SportsDB...',
        'Pulling teams for each sport...',
        'Retrieving recent and upcoming games...',
        'Indexing live and pregame matches...',
        'Storing all data in local memory...',
        'Finishing setup...'
      ];
      for (let i = 0; i < steps.length; i++) {
        logMessage(steps[i]);
        updateProgress(i + 1, steps.length);
        await new Promise(r => setTimeout(r, 800));
      }
    }

    simulateLoading();
  </script>
</body>
</html>
