<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Stats PNG Generator</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #eee; }
  #generateBtn { padding: 10px 20px; font-size: 16px; cursor: pointer; margin-bottom: 20px; }
  #outputImage { border: 1px solid #ccc; max-width: 100%; }
</style>
</head>
<body>

<h1>Stats PNG Generator Test</h1>
<button id="generateBtn">Generate PNG</button>
<br />
<img id="outputImage" alt="Generated Stats PNG" />

<script>
const canvasWidth = 800;
const canvasHeight = 1000;

const templateUrl = 'https://capper.ogcapperbets.com/admin/images/blankWatermark.png';

const statusColors = {
  Win: '#28a745',
  Lost: '#dc3545',
  Push: '#007bff',
  Pending: '#6c757d'
};

const statusEmojis = {
  Win: '‚úÖ',
  Lost: '‚ùå',
  Push: 'üü¶',
  Pending: '‚öôÔ∏è'
};

// Sample picks data to draw ‚Äî replace this with your real data as needed
const picks = [
  { teamSelected: 'Team A', wagerType: 'Spread', gameWinLossDraw: 'Win', unit: '+3' },
  { teamSelected: 'Team B', wagerType: 'Moneyline', gameWinLossDraw: 'Lost', unit: '-5' },
  { teamSelected: 'Team C', wagerType: 'Totals', gameWinLossDraw: 'Push', unit: 'o42.5' },
  { teamSelected: 'Team D', wagerType: 'Spread', gameWinLossDraw: 'Pending', unit: '+7' },
  // Add more picks to test scrolling or multi-page later
];

const generateBtn = document.getElementById('generateBtn');
const outputImage = document.getElementById('outputImage');

generateBtn.addEventListener('click', () => {
  const canvas = document.createElement('canvas');
  canvas.width = canvasWidth;
  canvas.height = canvasHeight;
  const ctx = canvas.getContext('2d');

  const background = new Image();
  background.crossOrigin = 'anonymous';
  background.src = templateUrl;

  background.onload = () => {
    // Draw watermark background
    ctx.drawImage(background, 0, 0, canvasWidth, canvasHeight);

    // Draw header
    ctx.fillStyle = '#222';
    ctx.font = 'bold 28px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Official Picks Stats Report', canvasWidth / 2, 60);

    // Draw generation date/time
    ctx.font = '16px Arial';
    ctx.fillStyle = '#555';
    const nowStr = new Date().toLocaleString('en-US', { timeZone: 'America/New_York' });
    ctx.fillText(`Generated: ${nowStr}`, canvasWidth / 2, 90);

    // Draw picks list
    ctx.textAlign = 'left';
    ctx.font = '16px Arial';

    let y = 140;
    picks.forEach(pick => {
      // Draw status emoji with colored circle
      const color = statusColors[pick.gameWinLossDraw] || '#000';
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(40, y - 8, 12, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#fff';
      ctx.font = 'bold 16px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(statusEmojis[pick.gameWinLossDraw] || '‚ùì', 40, y + 4);

      ctx.font = '16px Arial';
      ctx.fillStyle = '#222';
      ctx.textAlign = 'left';

      ctx.fillText(`Team: ${pick.teamSelected}`, 70, y);
      ctx.fillText(`Wager: ${pick.wagerType}`, 70, y + 22);
      ctx.fillText(`Unit: ${pick.unit}`, 70, y + 44);
      ctx.fillText(`Status: ${pick.gameWinLossDraw}`, 70, y + 66);

      y += 100;
    });

    // Export canvas to dataURL
    const dataURL = canvas.toDataURL('image/png');
    outputImage.src = dataURL;

    // Optional: trigger download automatically
    // const a = document.createElement('a');
    // a.href = dataURL;
    // a.download = 'official_picks_stats.png';
    // a.click();
  };
});
</script>

</body>
</html>
